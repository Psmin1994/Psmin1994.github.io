---
title: cookie-parser 모듈이란?
author: Psmin
data: 2023-02-03 15:31:27 +0900
categories: [Nodejs]
tags: [cookie-parser]
---

# 쿠키에 대해 알아보자.

---

## 쿠키 (Cookie)

쿠키란 사용자가 어떤 웹 사이트를 방문할 때 서버를 통해 사용자의 컴퓨터에 설치되는 **_작은 기록 정보 파일_**을 말합니다.  
HTTP는 Client의 요청 내용을 기억하지 않습니다. (HTTP의 stateless 특성)  
즉, 쿠키는 **_Client의 상태를 알려주는 데이터_**입니다.

> MDN 웹문서  
> : HTTP 쿠키 (웹 쿠키, 브라우저 쿠키)는 서버가 사용자의 웹 브라우저에 전송하는 작은 데이터 조각입니다.  
> 브라우저는 그 데이터 조각들을 저장해놓고, 동일한 서버에 요청 시 저장된 데이터를 함꼐 전송합니다.

- 데이터 형태 : **_key & value_**

- 용도 : 로그인 상태 유지, 30일 다시 보지 않기, ID 저장 등 **_서비스 지속성_** 제공

- 생성 과정

  - 쿠키가 없거나 만료됐을 때 : 서버가 응답을 보낼 때 새롭게 설정해 보냅니다.
  - 쿠키가 있을 때 : 요청에 쿠키를 함께 보냅니다.

- Server-Client 쿠키 흐름  
  ![cookie](/assets/img/cookie.png){: .w-80 .normal}

---

### 쿠키 생성

응답 객체의 cookie 프로퍼티를 이용해 쿠키를 생성합니다.

`res.cookie(key, value, options)`의 형태로 생성합니다.

마지막 options에 인자로 객체를 전달해 다양한 옵션을 설정할 수 있습니다.

- options

  - `path` (default : <kbd>/</kbd>)
    : 쿠키에 접근 가능한 결로를 지정합니다.  
    (ex > path = '/admin' 으로 설정한 쿠키는 '/admin/~'에서만 볼 수 있습니다.)

  - `domain` (default :<kbd>loaded</kbd>)  
    쿠키에 접근 가능한 도메인을 지정합니다.  
    (ex > domain = site.com 으로 설정한 쿠키는 'other.com'에서는 볼 수 없습니다.)

  - `expires`  
    쿠키의 만료 기간을 표준 시간으로 설정합니다.  
    (반드시 GMT 포맷으로 설정해야합니다.)
    (ex > 1일 설정 : `{expires : new Date(Date.now() + 24 * 60 * 60 * 1000)}`)

  - `max-age`
    쿠키의 만료 기간을 밀리초 단위로 설정합니다.  
    (ex > 1일 설정 : `{maxAge: 24 * 60 * 60 * 1000}`)

  > Persistent Cookie  
  > : max-age, expires 설정한 쿠키로 브라우저가 닫힐 때가 아닌 만료 기간이 지날 때 삭제되는 쿠키

  > Session Cookie  
  > : max-age, expires를 설정하지 않은 쿠키로 브라우저 종료시 삭제되는 쿠키.

  - httpOnly  
    HTTP 프로토콜만 쿠키 사용 가능

  - secure  
    HTTPS 프로토콜만 쿠키 사용 가능

```js
var cookieParser = require("cookie-parser");

app.use(cookieParser);
app.get("/", function (req, res) {
  res.cookie("key", "value", {
    maxAge: 10000,
  });
});
```
