---
title: 로그인 페이지 만들기 - 02
author: Psmin
data: 2023-01-19 18:43:21 +0900
categories: [Nodejs]
tags: []
---

# 로그인 기능을 구현해보자.

---

## nodemon 모듈

기능 구현을 하기 전 nodemon 모듈을 설치해보겠습니다.

nodemon 모듈은 Node.js 서버가 실행 중인 상태에서 Javascript 코드의 변경을 감지해 변경할 때 마다 실행해주는 Node.js의 패키지입니다.

Js코드의 변경 결과를 바로바로 확인 할 수 있어 서버를 재실행하는 작업을 생략할 수 있습니다.

```js
// 설치 명령어
npm i nodemon

// 실행 명령어
nodemon index.js
```

따라서 package.json 파일을 수정해 앞으로는 nodemon으로 서버를 실행하겠습니다.

```js
// package.json

...

// 서버 실행 명령어 (npm start) 를 수정해줍니다.
"scripts": {
    "start": "nodemon app.js",
  },

...
```

---

## EJS 파일 수정

이전 포스트에서 작성했던 login.ejs파일에 DOM을 활용할 수 있도록 수정해줍니다.

- input 태그에 id 값 설정

> button 태그를 p 태그로 바꿔 id 값 설정 (생략 가능)  
> 변경 시 css 파일의 button => #button 으로 변경

- 작성할 js파일 링크

```html
<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- css 링크 -->
    <link rel="stylesheet" href="/css/home/login.css" />

    <script src="/js/home/login.js" defer></script>
    <title>로그인 페이지</title>
  </head>

  <body>
    <div class="login-page">
      <div class="form">
        <form class="login-form">
          <!-- 먼저 입력 값이 들어갈 input 태그에 id 값을 설정합니다. -->
          <input id="id" type="text" placeholder="아이디" />
          <input id="psw" type="password" placeholder="비밀번호" />
          <!-- 저는 button도 id 값으로 불러올 수 있도록 하겠습니다. -->
          <!-- button도 id 값으로 사용할 시 css 파일도 변경해야 스타일이 적용됩니다. -->
          <p id="button">LOGIN</p>
          <p class="message">
            Not registered? <a href="/register">Create an account</a>
          </p>
        </form>
      </div>
    </div>
  </body>

  <!-- js 파일 -->
  <script src="/js/user/login.js" defer></script>
</html>

<!-- Copyright (c) 2022 by Aigars Silkalns (https://codepen.io/colorlib/pen/rxddKy) -->
```

---

## DOM 활용 Js 파일 작성

DOM을 활용해 로그인 기능을 구현해보겠습니다.

서버에 보내는 요청은 axios 모듈을 사용해보겠습니다.

다음에 fetch, axios 모듈에 대해 포스팅하면서 자세히 알아보기로 하고 이번엔 간단하게 사용해보겠습니다.

```js
"use strict";

const id = document.querySelector("#id"),
  password = document.querySelector("#password"),
  loginBtn = document.querySelector("#button");

loginBtn.addEventListener("click", login);

async function login() {
  if (!id.value) return alert("아이디를 입력해주세요.");
  if (!password.value) return alert("비밀번호를 입력해주세요.");

  const req = {
    id: id.value,
    password: password.value,
  };

  try {
    const res = await axios({
      url: "/user/login",
      method: "post",
      data: req,
    });

    console.log(res.data);
  } catch (err) {
    // 에러 처리 및 로그인 실패 메세지 출력
    if (res.err) return alert(res.err);
    else alert(res.msg);
  }
}
```

---

## 결론

다음 포스트에서는 <kbd>AWS RDS</kbd>에 `users` 스키마를 만들고 서버에 <kbd>REST API</kbd>를 구현해 연동해보겠습니다.
